<!DOCTYPE html>
<html lang="ko" class="h-full bg-white dark:bg-gray-900">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}운산자동차 CRM{% endblock %}</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindplus/elements@1" type="module"></script>
    
    {% block extra_head %}{% endblock %}
</head>
<body class="h-full">
    <!-- Mobile sidebar -->
    <el-dialog>
        <dialog id="sidebar" class="m-0 p-0 backdrop:bg-transparent lg:hidden">
            <el-dialog-backdrop class="fixed inset-0 bg-gray-900/80 transition-opacity duration-300 ease-linear data-[closed]:opacity-0"></el-dialog-backdrop>
            
            <div tabindex="0" class="fixed inset-0 flex focus:outline focus:outline-0">
                <el-dialog-panel class="group/dialog-panel relative mr-16 flex w-full max-w-xs flex-1 transform transition duration-300 ease-in-out data-[closed]:-translate-x-full">
                    <div class="absolute left-full top-0 flex w-16 justify-center pt-5 duration-300 ease-in-out group-data-[closed]/dialog-panel:opacity-0">
                        <button type="button" command="close" commandfor="sidebar" class="-m-2.5 p-2.5">
                            <span class="sr-only">사이드바 닫기</span>
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" data-slot="icon" aria-hidden="true" class="size-6 text-white">
                                <path d="M6 18 18 6M6 6l12 12" stroke-linecap="round" stroke-linejoin="round" />
                            </svg>
                        </button>
                    </div>
                    
                    <!-- Mobile Sidebar content -->
                    {% include 'components/sidebar_content.html' %}
                </el-dialog-panel>
            </div>
        </dialog>
    </el-dialog>
    
    <!-- Desktop sidebar -->
    <div class="hidden bg-gray-900 lg:fixed lg:inset-y-0 lg:z-50 lg:flex lg:w-72 lg:flex-col">
        {% include 'components/sidebar_content.html' %}
    </div>
    
    <!-- Mobile top bar -->
    <div class="sticky top-0 z-40 flex items-center gap-x-6 bg-gray-900 px-4 py-4 shadow sm:px-6 lg:hidden dark:shadow-none dark:after:pointer-events-none dark:after:absolute dark:after:inset-0 dark:after:border-b dark:after:border-white/10 dark:after:bg-black/10">
        <button type="button" command="show-modal" commandfor="sidebar" class="-m-2.5 p-2.5 text-gray-400 hover:text-white lg:hidden">
            <span class="sr-only">사이드바 열기</span>
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" data-slot="icon" aria-hidden="true" class="size-6">
                <path d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" stroke-linecap="round" stroke-linejoin="round" />
            </svg>
        </button>
        <div class="flex-1 text-sm/6 font-semibold text-white">{% block page_title %}대시보드{% endblock %}</div>
        <a href="{% url 'accounts:profile' %}">
            <span class="sr-only">프로필</span>
            <div class="size-8 rounded-full bg-gray-800 outline outline-1 -outline-offset-1 outline-white/10 flex items-center justify-center text-white text-sm">
                {{ user.username.0|upper }}
            </div>
        </a>
    </div>
    
    <!-- Secondary column (hidden on smaller screens) -->
    <aside class="fixed inset-y-0 left-72 hidden w-96 overflow-y-auto border-r border-gray-200 bg-white px-4 py-6 sm:px-6 lg:px-8 xl:block dark:border-white/10 dark:bg-gray-900">
        {% block sidebar_content %}
        <div class="h-full">
            <div class="space-y-6">
                <h3 class="text-lg font-medium text-gray-900 dark:text-white">{% block sidebar_title %}사이드바{% endblock %}</h3>
                {% block sidebar_body %}{% endblock %}
            </div>
        </div>
        {% endblock %}
    </aside>
    
    <!-- Main content -->
    <main class="py-10 lg:pl-72 xl:pl-[26rem]">
        <div class="px-4 sm:px-6 lg:px-8">
            {% if messages %}
                {% for message in messages %}
                    <div class="mb-4 rounded-md {% if message.tags == 'error' %}bg-red-50 border border-red-200 text-red-800{% elif message.tags == 'warning' %}bg-yellow-50 border border-yellow-200 text-yellow-800{% elif message.tags == 'success' %}bg-green-50 border border-green-200 text-green-800{% else %}bg-blue-50 border border-blue-200 text-blue-800{% endif %} p-4 dark:{% if message.tags == 'error' %}bg-red-900/20 border-red-800 text-red-200{% elif message.tags == 'warning' %}bg-yellow-900/20 border-yellow-800 text-yellow-200{% elif message.tags == 'success' %}bg-green-900/20 border-green-800 text-green-200{% else %}bg-blue-900/20 border-blue-800 text-blue-200{% endif %}">
                        {{ message }}
                    </div>
                {% endfor %}
            {% endif %}
            
            {% block content %}{% endblock %}
        </div>
    </main>
    
    {% block extra_js %}{% endblock %}
</body>
</html>